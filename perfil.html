<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perfil del Usuario | EDU-PLAY</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body {
      background: radial-gradient(circle at top left, #7a3cff, #0f0f10 70%);
      color: #fff;
      font-family: 'Poppins', sans-serif;
    }
    .glow {
      text-shadow: 0 0 10px #ff66c4, 0 0 20px #7a3cff;
    }
    .btn-gradient {
      background: linear-gradient(90deg, #7a3cff, #ff66c4);
      transition: all 0.3s ease;
    }
    .btn-gradient:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #ff66c4;
    }
    .avatar {
      border: 3px solid #ff66c4;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 0 20px #ff66c4;
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="fixed w-full z-50 backdrop-blur bg-black/40">
    <nav class="container mx-auto flex justify-between items-center py-4 px-6">
      <a href="index.html" class="flex items-center gap-2 btn-gradient px-4 py-2 rounded-full text-white font-semibold shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="white" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
        </svg>
        Volver
      </a>
      <h1 class="text-lg text-pink-400 font-bold glow tracking-wide">Mi Perfil ðŸ‘¤</h1>
    </nav>
  </header>

  <!-- CONTENIDO -->
  <section class="min-h-screen flex flex-col justify-center items-center pt-28 px-4 text-center">
    <div class="bg-black/50 rounded-3xl p-8 shadow-2xl w-full max-w-md">
      <h2 class="text-4xl font-bold text-pink-400 mb-6 glow">Tu Perfil EDU-PLAY</h2>

      <!-- FOTO DE PERFIL -->
      <div class="flex flex-col items-center mb-6">
        <img id="avatarImg" src="https://i.postimg.cc/8cJ9dTnQ/avatar1.png" alt="avatar" class="avatar mb-4" />
        <input id="avatarUpload" type="file" accept="image/*" class="text-sm text-gray-300" />
      </div>

      <!-- DATOS -->
      <div class="mb-6 text-left">
        <label class="block mb-1 text-violet-400 font-semibold">Nombre:</label>
        <input id="nameInput" type="text" placeholder="Tu nombre" class="w-full p-3 rounded-xl text-black" />
      </div>

      <div class="mb-6 text-left">
        <label class="block mb-1 text-violet-400 font-semibold">Frase personal:</label>
        <input id="phraseInput" type="text" placeholder="Agrega una frase que te motive" class="w-full p-3 rounded-xl text-black" />
      </div>

      <button id="saveBtn" class="btn-gradient px-6 py-3 rounded-xl font-semibold shadow-lg">Guardar Cambios ðŸ’¾</button>

      <!-- DATOS DE PROGRESO -->
      <div class="mt-10 text-left bg-black/30 p-4 rounded-2xl">
        <h3 class="text-2xl text-violet-400 font-bold mb-4">Tu progreso actual</h3>
        <p>ðŸ’Ž <b>Puntos:</b> <span id="points">0</span></p>
        <p>ðŸ”¥ <b>Racha:</b> <span id="streak">0 dÃ­as</span></p>
        <p>ðŸ“ˆ <b>Nivel:</b> <span id="level">1</span></p>
      </div>
    </div>
  </section>

  <!-- SCRIPT -->
  <script>
    const nameInput = document.getElementById("nameInput");
    const phraseInput = document.getElementById("phraseInput");
    const saveBtn = document.getElementById("saveBtn");
    const avatarImg = document.getElementById("avatarImg");
    const avatarUpload = document.getElementById("avatarUpload");
    const pointsEl = document.getElementById("points");
    const streakEl = document.getElementById("streak");
    const levelEl = document.getElementById("level");

    // Cargar datos guardados
    const user = JSON.parse(localStorage.getItem("eduplay_user")) || {
      name: "",
      phrase: "",
      avatar: "https://i.postimg.cc/8cJ9dTnQ/avatar1.png",
    };

    const points = parseInt(localStorage.getItem("eduplay_points")) || 0;
    const streak = parseInt(localStorage.getItem("eduplay_streak")) || 0;
    const level = Math.floor(points / 100) + 1;

    nameInput.value = user.name;
    phraseInput.value = user.phrase;
    avatarImg.src = user.avatar;
    pointsEl.textContent = points;
    streakEl.textContent = streak + " dÃ­as";
    levelEl.textContent = level;

    // Subir imagen personalizada
    avatarUpload.addEventListener("change", e => {
      const file = e.target.files[0];
      if (file && file.type.startsWith("image/")) {
        const reader = new FileReader();
        reader.onload = () => {
          avatarImg.src = reader.result;
          user.avatar = reader.result;
          localStorage.setItem("eduplay_user", JSON.stringify(user));
          Swal.fire({
            icon: "success",
            title: "Â¡Avatar actualizado!",
            text: "Tu nueva imagen se ha guardado correctamente.",
            timer: 1500,
            showConfirmButton: false
          });
        };
        reader.readAsDataURL(file);
      } else {
        Swal.fire("Error", "Por favor selecciona una imagen vÃ¡lida.", "error");
      }
    });

    // Guardar nombre y frase
    saveBtn.onclick = () => {
      user.name = nameInput.value.trim();
      user.phrase = phraseInput.value.trim();
      localStorage.setItem("eduplay_user", JSON.stringify(user));
      Swal.fire({
        icon: "success",
        title: "Â¡Perfil actualizado!",
        text: "Tus cambios se han guardado correctamente.",
        timer: 1500,
        showConfirmButton: false
      });
    };
    
    function resetEduplay() {
      localStorage.clear();
      Swal.fire({
        icon: "success",
        title: "Datos reiniciados",
        text: "Todo el progreso ha sido eliminado. La pÃ¡gina se recargarÃ¡.",
        timer: 2000,
        showConfirmButton: false
      });
      setTimeout(() => location.reload(), 1500);
    }

  </script>
  <button onclick="resetEduplay()" class="btn-gradient mt-6 px-6 py-3 rounded-xl">
  Reiniciar progreso ðŸ”„
</button>

<script>
  function resetEduplay() {
    localStorage.clear();
    Swal.fire({
      icon: "success",
      title: "Datos reiniciados",
      text: "Todo el progreso ha sido eliminado. La pÃ¡gina se recargarÃ¡.",
      timer: 2000,
      showConfirmButton: false
    });
    setTimeout(() => location.reload(), 1500);
  }
</script>

</body>
</html>
