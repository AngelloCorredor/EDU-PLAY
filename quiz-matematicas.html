<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz de MatemÃ¡ticas | EDU-PLAY</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body {
      background: radial-gradient(circle at top left, #7a3cff, #0f0f10 70%);
      color: #fff;
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
    }
    .btn-gradient {
      background: linear-gradient(90deg, #7a3cff, #ff66c4);
      transition: all 0.3s ease;
    }
    .btn-gradient:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #ff66c4;
    }
    .glow {
      text-shadow: 0 0 10px #ff66c4, 0 0 20px #7a3cff;
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="fixed w-full z-50 backdrop-blur bg-black/40">
    <nav class="container mx-auto flex justify-between items-center py-4 px-6">
      <a href="index.html" class="flex items-center gap-2 btn-gradient px-4 py-2 rounded-full text-white font-semibold shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="white" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
        </svg>
        Volver
      </a>
      <h1 class="text-lg text-pink-400 font-bold glow tracking-wide">Quiz de MatemÃ¡ticas ðŸ§®</h1>
    </nav>
  </header>

  <!-- CONTENEDOR -->
  <section class="min-h-screen flex flex-col justify-center items-center pt-28 px-4 text-center">
    <div class="bg-black/50 rounded-3xl p-8 shadow-2xl w-full max-w-xl">
      <h2 id="question" class="text-2xl font-bold text-pink-400 mb-6 glow">Cargando pregunta...</h2>
      <div id="options" class="flex flex-col gap-4"></div>
      <div class="mt-6 text-gray-300">
        <p>Puntaje: <span id="score" class="text-pink-400 font-bold">0</span></p>
        <p>Progreso: <span id="progress" class="text-violet-400 font-bold">0</span></p>
      </div>
    </div>
  </section>

  <!-- SCRIPT -->
  <script>
    const questions = [
      {
        q: "Â¿CuÃ¡nto es 8 Ã— 7?",
        options: ["54", "56", "64", "58"],
        answer: "56"
      },
      {
        q: "Â¿CuÃ¡l es la raÃ­z cuadrada de 81?",
        options: ["9", "8", "7", "6"],
        answer: "9"
      },
      {
        q: "Â¿CuÃ¡nto es (12 Ã· 3) + 5?",
        options: ["9", "8", "7", "6"],
        answer: "9"
      },
      {
        q: "Si un triÃ¡ngulo tiene lados de 3, 4 y 5, Â¿quÃ© tipo es?",
        options: ["EquilÃ¡tero", "IsÃ³sceles", "RectÃ¡ngulo", "Escaleno"],
        answer: "RectÃ¡ngulo"
      },
      {
        q: "Â¿CuÃ¡nto es 15% de 200?",
        options: ["25", "20", "35", "30"],
        answer: "30"
      },
      {
        q: "Â¿CuÃ¡l es el resultado de 2Â³?",
        options: ["8", "6", "9", "12"],
        answer: "8"
      },
      {
        q: "Si x = 10 y y = 5, Â¿cuÃ¡nto es x - y?",
        options: ["15", "10", "5", "0"],
        answer: "5"
      }
    ];

    // --- Variables de control ---
    let score = 0;
    let questionIndex = 0;
    let currentQuestions = [];
    const totalQuestions = 5;

    const qEl = document.getElementById("question");
    const optEl = document.getElementById("options");
    const scoreEl = document.getElementById("score");
    const progressEl = document.getElementById("progress");

    // --- InicializaciÃ³n ---
    startQuiz();

    function startQuiz() {
      // Mezclar y elegir 5 preguntas aleatorias
      currentQuestions = [...questions].sort(() => 0.5 - Math.random()).slice(0, totalQuestions);
      score = 0;
      questionIndex = 0;
      showQuestion();
      updateUI();
    }

    function showQuestion() {
      if (questionIndex >= totalQuestions) return finishQuiz();
      const q = currentQuestions[questionIndex];
      qEl.textContent = q.q;
      optEl.innerHTML = "";
      q.options.sort(() => 0.5 - Math.random());
      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.className = "btn-gradient py-2 px-4 rounded-full w-full";
        btn.onclick = () => checkAnswer(opt, q.answer, btn);
        optEl.appendChild(btn);
      });
      updateUI();
    }

    function checkAnswer(selected, correct, button) {
      const buttons = optEl.querySelectorAll("button");
      buttons.forEach(b => (b.disabled = true));

      if (selected === correct) {
        button.classList.add("bg-green-500");
        score += 5;
        Swal.fire({ icon: "success", title: "Â¡Correcto!", text: "+5 puntos", timer: 1000, showConfirmButton: false });
      } else {
        button.classList.add("bg-red-500");
        Swal.fire({ icon: "error", title: "Incorrecto", text: `La respuesta correcta era: ${correct}`, timer: 1500, showConfirmButton: false });
      }

      scoreEl.textContent = score;
      setTimeout(() => {
        questionIndex++;
        showQuestion();
      }, 1000);
    }

    function updateUI() {
      progressEl.textContent = `${questionIndex}/${totalQuestions}`;
      scoreEl.textContent = score;
    }

    function finishQuiz() {
      // Bonus si alcanza 80%
      let bonus = 0;
      const percent = (score / (totalQuestions * 5)) * 100;
      if (percent >= 80) bonus = 10;

      // Sumar al total global
      const total = parseInt(localStorage.getItem("eduplay_points")) || 0;
      localStorage.setItem("eduplay_points", total + score + bonus);

      let message = `Puntaje total: ${score} pts`;
      if (bonus > 0) message += `\nÂ¡Bonus +10 pts por excelente resultado!`;

      Swal.fire({
        title: "ðŸŽ‰ Â¡Quiz completado!",
        text: message,
        icon: "success",
        confirmButtonText: "Volver al inicio",
        confirmButtonColor: "#7a3cff",
        showDenyButton: true,
        denyButtonText: "Reintentar"
      }).then(r => {
        if (r.isConfirmed) window.location.href = "index.html";
        else startQuiz();
      });
    }
  </script>
</body>
</html>
