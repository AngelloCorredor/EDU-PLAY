<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel de HÃ¡bitos | EDU-PLAY</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body {
      background: radial-gradient(circle at top left, #7a3cff, #0f0f10 70%);
      color: #fff;
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
    }
    .glow {
      text-shadow: 0 0 10px #ff66c4, 0 0 20px #7a3cff;
    }
    .btn-gradient {
      background: linear-gradient(90deg, #7a3cff, #ff66c4);
      transition: all 0.3s ease;
    }
    .btn-gradient:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #ff66c4;
    }
    .habit-card {
      transition: all 0.3s ease;
      position: relative;
    }
    .habit-card.completed {
      background: rgba(122, 60, 255, 0.3);
      border: 2px solid #ff66c4;
      transform: scale(1.05);
    }
    .delete-btn {
      position: absolute;
      top: 6px;
      right: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      width: 26px;
      height: 26px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      color: #ff66c4;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .delete-btn:hover {
      background: #ff66c4;
      color: white;
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="fixed w-full z-50 backdrop-blur bg-black/40">
    <nav class="container mx-auto flex justify-between items-center py-4 px-6">
      <a href="index.html" class="flex items-center gap-2 btn-gradient px-4 py-2 rounded-full text-white font-semibold shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="white" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
        </svg>
        Volver
      </a>
      <h1 class="text-lg text-pink-400 font-bold glow tracking-wide">Panel de HÃ¡bitos ðŸ’ª</h1>
    </nav>
  </header>

  <!-- CONTENIDO -->
  <section class="min-h-screen flex flex-col justify-center items-center pt-28 px-4 text-center">
    <div class="bg-black/50 rounded-3xl p-8 shadow-2xl w-full max-w-3xl">
      <h2 class="text-4xl font-bold text-pink-400 mb-6 glow">Crea tus hÃ¡bitos y cumple tus metas ðŸŒŸ</h2>

      <!-- FRASE MOTIVACIONAL -->
      <p id="frase" class="text-gray-300 italic mb-6"></p>

      <!-- AGREGAR NUEVO HÃBITO -->
      <div class="flex flex-col sm:flex-row gap-4 mb-8 justify-center">
        <input id="habitInput" type="text" placeholder="Nuevo hÃ¡bito..." class="w-full sm:w-2/3 p-3 rounded-xl text-black outline-none" />
        <button id="addHabitBtn" class="btn-gradient px-6 py-3 rounded-xl font-semibold shadow-lg">Agregar</button>
      </div>

      <!-- PROGRESO -->
      <div class="mb-8">
        <div class="w-full bg-gray-700 rounded-full h-5">
          <div id="progressBar" class="bg-gradient-to-r from-pink-500 to-violet-500 h-5 rounded-full transition-all"></div>
        </div>
        <p id="progressText" class="text-gray-300 mt-2">0% completado</p>
      </div>

      <!-- LISTA DE HÃBITOS -->
      <div id="habitsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6 text-left"></div>
    </div>
  </section>

  <!-- SCRIPT -->
  <script>
    const frases = [
      "Un poco de esfuerzo cada dÃ­a, grandes resultados despuÃ©s ðŸ’ª",
      "La disciplina vence al talento ðŸŒŸ",
      "Hoy puede ser el dÃ­a que cambie todo ðŸ”¥",
      "Sigue aprendiendo, sigue creciendo ðŸ“˜"
    ];

    const defaultHabits = [
      { id: 1, text: "Leer 20 minutos", done: false },
      { id: 2, text: "Repasar apuntes", done: false },
      { id: 3, text: "Resolver un ejercicio", done: false },
      { id: 4, text: "Tomar agua", done: false },
      { id: 5, text: "Descansar la vista", done: false }
    ];

    const today = new Date().toDateString();
    const storedDate = localStorage.getItem("eduplay_habits_date");
    let habits = JSON.parse(localStorage.getItem("eduplay_habits")) || defaultHabits;

    // Reinicio diario pero conserva hÃ¡bitos personalizados
    if (storedDate !== today) {
      habits = habits.map(h => ({ ...h, done: false }));
      localStorage.setItem("eduplay_habits_date", today);
      localStorage.setItem("eduplay_habits", JSON.stringify(habits));
    }

    const container = document.getElementById("habitsContainer");
    const progressBar = document.getElementById("progressBar");
    const progressText = document.getElementById("progressText");
    const fraseEl = document.getElementById("frase");
    const addBtn = document.getElementById("addHabitBtn");
    const habitInput = document.getElementById("habitInput");

    fraseEl.textContent = frases[Math.floor(Math.random() * frases.length)];

    renderHabits();

    // FunciÃ³n para mostrar hÃ¡bitos
    function renderHabits() {
      container.innerHTML = "";
      habits.forEach(h => {
        const card = document.createElement("div");
        card.className = `habit-card bg-[#1a1a1a] p-5 rounded-2xl shadow-lg cursor-pointer ${h.done ? "completed" : ""}`;
        card.textContent = h.text;
        card.onclick = () => toggleHabit(h.id);

        // BotÃ³n eliminar
        const del = document.createElement("div");
        del.className = "delete-btn";
        del.textContent = "Ã—";
        del.onclick = e => {
          e.stopPropagation();
          deleteHabit(h.id);
        };

        card.appendChild(del);
        container.appendChild(card);
      });
      updateProgress();
    }

    // Agregar hÃ¡bito
    addBtn.onclick = () => {
      const text = habitInput.value.trim();
      if (!text) return Swal.fire("Oops", "Escribe un hÃ¡bito primero", "info");
      const newHabit = { id: Date.now(), text, done: false };
      habits.push(newHabit);
      localStorage.setItem("eduplay_habits", JSON.stringify(habits));
      habitInput.value = "";
      renderHabits();
      Swal.fire("Â¡Listo!", "Nuevo hÃ¡bito agregado âœ¨", "success");
    };

    // Completar hÃ¡bito
    function toggleHabit(id) {
      habits = habits.map(h => (h.id === id ? { ...h, done: !h.done } : h));
      localStorage.setItem("eduplay_habits", JSON.stringify(habits));

      if (habits.find(h => h.id === id && h.done)) {
        const totalPoints = parseInt(localStorage.getItem("eduplay_points")) || 0;
        localStorage.setItem("eduplay_points", totalPoints + 5);

        const streak = parseInt(localStorage.getItem("eduplay_streak")) || 0;
        localStorage.setItem("eduplay_streak", streak + 1);

        Swal.fire({
          icon: "success",
          title: "Â¡Buen trabajo!",
          text: "+5 puntos ganados",
          timer: 1000,
          showConfirmButton: false
        });
      }

      renderHabits();
    }

    // Eliminar hÃ¡bito
    function deleteHabit(id) {
      habits = habits.filter(h => h.id !== id);
      localStorage.setItem("eduplay_habits", JSON.stringify(habits));
      renderHabits();
    }

    // Actualizar progreso
    function updateProgress() {
      const completed = habits.filter(h => h.done).length;
      const percent = Math.round((completed / habits.length) * 100) || 0;
      progressBar.style.width = percent + "%";
      progressText.textContent = percent + "% completado";
    }
  </script>
</body>
</html>
